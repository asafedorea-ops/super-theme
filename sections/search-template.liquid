<!-- start search-template.liquid (SECTION) -->

{%- assign image_width = 560 -%}
{%- assign width_mobile = 200 -%}
{%- assign width_desk = 560 -%}
{%- assign width_small = 300 -%}


<div class="wrapper">
  <div class="search collection container">
    <div class="inner">
      {% if settings.enable_breadcrumbs_search %}  
        {%- render 'breadcrumb' -%}
      {% endif %}
      {% if template contains 'search' and section.settings.enable_swatch_bar_inside_wrapper and search.performed != true %}
        <header class="section-header">
            <h1 id="id-section-header" class="section-header__title section-header__left title">Search...</strong></h1>
            {%- if settings.enable_search_form -%}
                <form id="template-search-form" action="/search" method="get" class="search-page-form">
                    <input aria-label="search-text" type="text" class="search-text" name="q" id="Search-Template-Input" value="{{ search.terms | escape }}" placeholder="Search...">
                    <button id="Template-SearchButton" type="submit" class="button">
                        <span class="icon-fallback-text">{{ 'general.search.submit' | t }}</span>
                    </button>
                </form>
            {%- endif -%}
        </header>
      {% endif %}

      {%- if search.performed -%}
          <h1 id="id-section-header" class="section-header__title section-header__left title">Search for: <strong class="search-terms">"{{ search.terms }}"</strong></h1>
          {%- if search.results_count == 0 -%}
            <header class="section-header">
              <h2 class="text-center">{{ 'general.search.no_results_html' | t: terms: search.terms }}</h2>
              {%- if section.settings.enable_swatch_bar_inside_wrapper -%}
                <form id="template-search-form" action="/search" method="get" class="search-page-form">
                  <input aria-label="search-text" type="text" class="search-text" name="q" id="Search-Template-Input" value="{{ search.terms | escape }}" placeholder="{{ header_searchbar_placeholder }}">
                  <button id="Template-SearchButton" type="submit" class="button">
                      <span class="icon-fallback-text">{{ 'general.search.submit' | t }}</span>
                  </button>
                </form>
              {%- endif -%}
            </header>
          {%- elsif section.settings.enable_swatch_bar_inside_wrapper -%}
            <header class="section-header">
              <h2 class="hide">{{ search.terms }}</h2>

              <form id="template-search-form" action="/search" method="get" class="search-page-form">
                <input aria-label="search-text" type="text" class="search-text" name="q" id="Search-Template-Input" value="{{ search.terms | escape }}" placeholder="{{ header_searchbar_placeholder }}">
                <button id="Template-SearchButton" type="submit" class="button">
                    <span class="icon-fallback-text">{{ 'general.search.submit' | t }}</span>
                </button>
              </form>
            </header>
          {%- endif -%}
      {%- else -%}
          <header class="section-header">
            <h2 class="hide">{{ search.terms }}</h2>
            <span class="section-header__title section-header__left text-center">{{ 'general.search.title' | t }}</span>
          </header>
      {%- endif -%}

      {%- if search.performed and search.results_count > 0 -%}
        {%- paginate search.results by 50 -%}
            {%- if template contains 'search' -%}
              {%- assign source = search.results -%}
              {%- assign is_search = true -%}
            {%- else -%}
              {%- assign source = collection.products -%}
              {%- assign is_search = false -%}
            {%- endif -%}

            {%- capture list_of_products -%}
              {%- for item in source -%}
                {%- if is_search -%}
                  {%- if item.object_type == 'product' -%}
                  {%- render 'product-card',
                    prod: item,
                    width_large: width_large,
                    width_mobile: width_mobile,
                    width_desk: width_desk,
                    max_width: image_width,
                    show_swatch: false,
                    show_reviews: true,
                    show_price: true
                  -%}
                  {%- endif -%}
                {%- else -%}
                {%- endif -%}
              {%- endfor -%}
            {%- endcapture -%}
            <div class="grid-uniform grid-uniform--s4">
              {{ list_of_products }}
            </div>
            {%- if paginate.pages > 1 -%}
                <hr>
                <div class="pagination">
                  {{ paginate | default_pagination | replace: '&laquo; Previous', '&larr;' | replace: 'Next &raquo;', '&rarr;' }}
                </div>
            {%- endif -%}
        {%- endpaginate -%}
      {%- endif -%}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Search Template",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_swatch_bar_inside_wrapper",
      "label": "Enable Search Bar Inside Wrapper",
      "default": false
    }
  ]
}
{% endschema %}